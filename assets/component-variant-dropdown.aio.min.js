/*
Generated time: November 27, 2024 07:21
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
customElements.get("variant-dropdown")||customElements.define("variant-dropdown",class extends HTMLElement{constructor(){super(),["onDocumentClick","handleOptionKeyDown","closeDropdownOnFocusOut"].forEach(t=>{this[t]=this[t].bind(this)})}connectedCallback(){this.cacheDOMElements(),this.addEventListeners()}cacheDOMElements(){this.dropdownButton=this.querySelector("[data-dropdown-button]"),this.dropdownList=this.querySelector("[data-dropdown-list]"),this.selectedOptionDisplay=this.querySelector("[data-selected-option]"),this.options=this.dropdownList.querySelectorAll("li"),this.productForm=this.closest("product-information"),this.sectionId=this.getAttribute("data-section-id")}addEventListeners(){this.dropdownButton.addEventListener("click",()=>this.toggleDropdown()),this.options.forEach(t=>{t.addEventListener("click",()=>this.handleOptionClick(t)),t.addEventListener("keydown",this.handleOptionKeyDown)}),this.dropdownList.addEventListener("focusout",this.closeDropdownOnFocusOut),document.addEventListener("click",this.onDocumentClick)}handleOptionKeyDown(t){"Enter"===t.key&&this.handleOptionClick(t.target)}closeDropdownOnFocusOut(){setTimeout(()=>{this.contains(document.activeElement)||(this.updateButtonStates(),this.updateDropdownClasses(!0),this.closeDropdown())},0)}handleOptionClick(t){this.updateOptionLabel(this.selectedOptionDisplay,t),this.markOptionAsSelected(t),this.toggleDropdown(),this.dispatchEventOnChange(t)}toggleDropdown(){let t="block"===this.dropdownList.style.display;this.updateButtonStates(),t?(this.dropdownButton.focus(),this.updateDropdownClasses(t),this.closeDropdown()):(this.dropdownList.querySelector("li").focus(),this.dropdownList.style.display="block",setTimeout(()=>this.updateDropdownClasses(t),50))}dispatchEventOnChange(){eventBus.emit("variant:change",{sectionId:this.sectionId})}updateOptionLabel(t,e){e=e.querySelector(".option-label").textContent;t.textContent=e}updateDropdownClasses(t){t=t?"remove":"add";this.classList[t]("variant-dropdown--open"),this.dropdownList.classList[t]("variant-dropdown-fade-enter-active","variant-dropdown-fade-enter-to","variant-dropdown-fade-enter"),this.dropdownList.classList["add"==t?"remove":"add"]("variant-dropdown-fade-leave-active","variant-dropdown-fade-leave-to","variant-dropdown-fade-enter")}updateButtonStates(){var t="block"===this.dropdownList.style.display;this.dropdownButton.setAttribute("aria-expanded",t?"false":"true")}markOptionAsSelected(t){this.options.forEach(t=>{t.removeAttribute("selected"),t.classList.remove("selected")}),t.setAttribute("selected",""),t.classList.add("selected")}onDocumentClick(t){this.contains(t.target)||(this.updateButtonStates(),this.updateDropdownClasses(!0),this.closeDropdown())}closeDropdown(){setTimeout(()=>{this.dropdownList.style.display="none"},150)}disconnectedCallback(){document.removeEventListener("click",this.onDocumentClick)}});